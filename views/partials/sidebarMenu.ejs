<header class="header body-pd-header" id="header">
  <div class="header_toggle"><i class="bx bx-menu" id="header-toggle"></i></div>
  <div class="d-flex flex-row align-items-center">
    <div class="dropdown pe-2">
      <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bx bx-layer-plus bx-sm"></i>
      </button>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="#">Join notebook</a></li>
        <li>
          <hr class="dropdown-divider" />
        </li>
        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Create notebook</a></li>
      </ul>
    </div>
    <div class="dropdown text-end">
      <a href="#" class="d-block link-dark text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="<%=user.pic%>" alt="mdo" width="32" height="32" class="rounded-circle" />
        <strong class="d-none d-sm-inline"><%=user.name%></strong>
      </a>
      <ul class="dropdown-menu text-small" aria-labelledby="profile-dropdown">
        <li><a class="dropdown-item" href="/settings">Settings</a></li>
        <li>
          <hr class="dropdown-divider" />
        </li>
        <li><a class="dropdown-item" href="/signout">Sign out</a></li>
      </ul>
    </div>
  </div>
</header>

<div class="l-navbar shown" id="nav-bar">
  <nav class="nav">
    <div>
      <a href="/" class="nav_logo">
        <i class="bx bx-layer nav_logo-icon"></i>
        <span class="nav_logo-name">NoteBook</span>
      </a>
      <div class="nav_list">
        <!-- <a href="/dashboard" class="nav_link">
          <i class="bx bx-grid-alt nav_icon"></i>
          <span class="nav_name">Dashboard</span>
        </a> -->
        <a href="/assignment" class="nav_link">
          <i class="bx bx-folder nav_icon"></i>
          <span class="nav_name">Assignments</span>
        </a>
        <% if(user.view !== "asStudent"){ %>
        <a href="/assignment/add" class="nav_link">
          <i class="bx bx-user nav_icon"></i>
          <span class="nav_name">Add Assignment</span>
        </a>
        <% } %>
        <!-- bx-bar-chart-alt-2 -->
        <a href="/settings" class="nav_link">
          <i class="bx bx-cog nav_icon"></i>
          <span class="nav_name">Settings</span>
        </a>
      </div>
    </div>
    <a href="/signout" class="nav_link">
      <i class="bx bx-log-out nav_icon"></i>
      <span class="nav_name">SignOut</span>
    </a>
  </nav>
</div>

<!-- Popup modals -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title fs-5">Create Notebook</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form action="/create/notebook" method="post">
        <div class="modal-body">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="nbName" name="nbName" placeholder="Notebook Name" required autofocus/>
            <label for="nbName">Notebook Name</label>
          </div>
          <div class="row">
            <label for="notebookColor" class="col-sm-2 col-form-label">Color</label>
            <div class="col">
              <input type="color" class="form-control form-control-color" name="nbColor" value="#2ff98d" />
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    var url = window.location;
    // Will only work if string in href matches with location
    $('.nav_list a[href="' + url + '"]').addClass("active");

    // Will also work for relative and absolute hrefs
    $(".nav_list a")
      .filter(function () {
        return this.href == url;
      })
      .addClass("active");
  });
</script>
